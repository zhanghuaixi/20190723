<!doctype html>
<html>

  <head>
    <meta charset="utf-8">
    <title>jQ</title>
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <style>@charset "utf-8"; html,body{margin:0;padding:0;font-size:10px;min-width: 1340px;position: relative;height:100%;background-size: 100%;background-color: black} html,body,div,dl,dt,dd,ol,ul,li,h1,h2,h3,h4,h5,h6,pre,form,fieldset,input,textarea,p,blockquote,th,td,p{margin:0;padding:0;font-size: 16px;} img{border:0; vertical-align:bottom;} ul,li{list-style:none;} a{text-decoration:none;color: #fff} input::-webkit-input-placeholder {color:#fff;font-size:12px;} .cl{display: block;clear: both;} .box{position: relative;padding-bottom: 90px} .Title{font-size: 54.85px;color: white;font-weight: bold;text-align: center;padding-top: 110px;padding-bottom: 70px} .prizeList{width: 1340px;margin: 0 auto;-moz-column-count:2;-webkit-column-count:2;column-count: 2;column-gap: none;column-count:none;} .prizeList li{width: 650px;height: 60px;background-color: rgba(38,58,219,.7);line-height: 60px;box-sizing:border-box;border:1px dashed #2864ef;margin-bottom: 15px;padding: 0 15px;color: #fff;font-weight: bold;font-size: 22px;writing-mode: lr-tb;display: inline-block; /*ie8 竖直排列*/} .prizeList li label{float: right;font-weight: normal;} .submit{width: 540px;height:98px;margin: 35px auto 0;background: url(../img/btnbg.pg) no-repeat;background-size: 100% 100%;font-weight: bold;font-size: 52px;color: #fff;text-align: center;line-height: 98px;}</style></head>

  <body>
    <div class="box">
      <p class="Title">恭喜</p>
      <ul class="prizeList"></ul>
      <div class="submit" data-id="0">开始抽取</div></div>
<script type="text/javascript">//从一个给定的数组arr中,随机返回num个不重复项
      function getArrayItems(arr, num) {
        //新建一个数组,将传入的数组复制过来,用于运算,而不要直接操作传入的数组;
        var temp_array = new Array();
        for (var index in arr) {
          temp_array.push(arr[index]);
        }
        //取出的数值项,保存在此数组
        var return_array = new Array();
        for (var i = 0; i < num; i++) {
          //判断如果数组还有可以取出的元素,以防下标越界
          if (temp_array.length > 0) {
            //在数组中产生一个随机索引
            var arrIndex = Math.floor(Math.random() * temp_array.length);
            //将此随机索引的对应的数组元素值复制出来
            return_array[i] = temp_array[arrIndex];
            //然后删掉此索引的数组元素,这时候temp_array变为新的数组
            temp_array.splice(arrIndex, 1);
          } else {
            //数组中数据项取完后,退出循环,比如数组本来只有10项,但要求取出20项.
            break;
          }
        }
        return return_array;
      }
      var interval;
      $(".submit").click(function() {
        var status = $(this).data("id");
        var ints;
        if (status == 0) {
          $.get("/Data/data.json", {},
          function(data) {
            if (data) {
              if (data.code == "1") {
                function times() {
                  var ArrList = data.data;
                  var res = getArrayItems(ArrList, 4);
                  str = '';
                  for (o in res) {
                    num = parseInt(o) + 1;
                    str += '<li data-id="' + res[o].id + '">' + num + '、<span>' + res[o].name + '</span><label>' + res[o].tel + '</label></li>';
                  }
                  $(".prizeList").html(str);
                }
                interval = setInterval(times, 0);
                $(".submit").data("id", "1");
                $(".submit").text("停止抽取");
              }
            } else {
              alert('Ajax error!');
            }
          },
          'json');
        } else {
          clearInterval(interval);
          $(".submit").data("id", "0");
          $(".submit").text("开始抽取");
        }
})</script>
    <div style="text-align:center;margin:50px 0; font:normal 14px/24px 'MicroSoft YaHei';"></div>
  </body>

</html>
